{"version":3,"file":"owly-webflow.umd.js","sources":["../src/config/environment.js","../src/lib/http-client.js","../src/lib/get-project-availability.js"],"sourcesContent":["export const environment = {\n  apis: {\n    owly: {\n      baseURL: 'https://owly.com.co/owly-api/index.php',\n      endpoints: {\n        getProject: {\n          method: 'get',\n          uri: '/project/{projectId}',\n        },\n      },\n    },\n  },\n};\n","import axios from 'axios';\n\n// Uri params interpolation\nfunction getURI(uri, params = {}) {\n  const matches = uri.match(/\\{([a-zA-Z0-9_]+)}/g);\n\n  if (matches) {\n    let parsedUri = uri;\n\n    matches.forEach((match) => {\n      const name = match.replace(/{?}?/g, '');\n\n      parsedUri = parsedUri.replace(match, params[name] || '');\n    });\n\n    return parsedUri;\n  }\n\n  return uri;\n}\n\nclass HttpClient {\n  constructor({ baseURL, headers, endpoints = {}, timeout = 30000 }) {\n    this.client = axios.create({ baseURL, headers, timeout });\n\n    Object.keys(endpoints).forEach((endpointName) => {\n      const { uri, method } = endpoints[endpointName];\n\n      this[endpointName] = ({ urlParams, config = {}, data = {} } = {}) => {\n        const composedUri = getURI(uri, urlParams);\n        const abortController = new AbortController();\n        const requestConfig = {\n          ...config,\n          signal: abortController.signal,\n        };\n\n        let apiCall;\n\n        if (['get', 'delete', 'head', 'options'].includes(method)) {\n          apiCall = this.client[method](composedUri, requestConfig);\n        } else {\n          apiCall = this.client[method](composedUri, data, requestConfig);\n        }\n\n        apiCall.abort = () => abortController.abort();\n\n        return apiCall;\n      };\n    });\n  }\n}\n\nexport default HttpClient;\n","import { environment } from 'owly-webflow-config/environment';\nimport HttpClient from './http-client';\n\nconst api = Object.keys(environment.apis).reduce((apis, apiName) => {\n  const apiConfig = environment.apis[apiName];\n\n  apis[apiName] = new HttpClient(apiConfig);\n\n  return apis;\n}, {});\n\nasync function getProjectAvailability(options) {\n  const { product, companyCode, projectId, itemCallback } = options;\n\n  const { status, data } = await api.owly.getProject({\n    config: {\n      headers: {\n        product,\n        'company-code': companyCode,\n      },\n    },\n    urlParams: {\n      projectId,\n    },\n  });\n\n  if (status === 200 && data.items?.length) {\n    data.items.forEach((item) => {\n      if (itemCallback && typeof itemCallback === 'function') {\n        itemCallback(item);\n      }\n    });\n  }\n}\n\nexport default getProjectAvailability;\n"],"names":[],"mappings":"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"}