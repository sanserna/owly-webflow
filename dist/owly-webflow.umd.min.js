!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("axios"),require("parsleyjs")):"function"==typeof define&&define.amd?define(["exports","axios","parsleyjs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).owlyWebflow={},e.axios,e.parsley)}(this,(function(e,t,o){"use strict";const r=function(e){let{baseURL:o,headers:r={},endpoints:n={},timeout:a=3e4}=e;const i=t.create({baseURL:o,headers:r,timeout:a}),s={};return Object.entries(n).forEach((e=>{let[t,o]=e;const{url:r,method:n}=o;s[t]=function(){let{urlParams:e,config:t={},data:o={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=e.match(/\{([a-zA-Z0-9_]+)}/g);if(o){let r=e;return o.forEach((e=>{const o=e.replace(/{?}?/g,"");r=r.replace(e,t[o]||"")})),r}return e}(r,e);return["get","delete","head","options"].includes(n)?i[n](a,t):i[n](a,o,t)}})),s}({baseURL:"https://api.owly.com.co",endpoints:{getProject:{method:"get",url:"/projects/{projectId}"},createLead:{method:"post",url:"/leads/"}}});const n=e=>e.serializeArray().reduce(((e,t)=>{let{name:o,value:r}=t;return{...e,[o]:r}}),{});function a(e){const t=e.$element,o=t.find("button[type=submit]"),a=t.find("div[role=alert]");return o.prop("disabled",!0),r.createLead({data:n(t)}).then((()=>{o.prop("disabled",!1),t.trigger("reset"),a.removeClass("d-none"),setTimeout((()=>a.addClass("d-none")),5e3),e.reset()})),!1}e.getProjectAvailability=async function(e){var t;const{product:o,companyCode:n,projectId:a,token:i,itemCallback:s,limit:c=400}=e,{status:d,data:l}=await r.getProject({config:{params:{product:o,companyCode:n,limit:c,token:i}},urlParams:{projectId:a}}),{project:u}=l;200===d&&null!==(t=u.units)&&void 0!==t&&t.length&&u.units.forEach((e=>{s&&"function"==typeof s&&s(e)}))},e.initForm=async function(e){new o.Factory(e,{errorClass:"is-invalid",successClass:"is-valid",errorsWrapper:'<div class="invalid-feedback"></div>',errorTemplate:"<div></div>"}).on("form:submit",a)}}));
